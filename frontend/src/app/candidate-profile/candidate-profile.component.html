<div class="profile-page">

  <!-- Laadimine -->
  <div *ngIf="loading" class="profile-loading">
    <div class="spinner"></div>
    <span>Laen profiili andmeid...</span>
  </div>

  <!-- Error -->
  <div *ngIf="!loading && error" class="profile-error">
    {{ error }}
  </div>

  <!-- Sisu -->
  <div *ngIf="!loading && !error" class="profile-content">
    <h1 class="profile-title">Minu profiil</h1>
    <p class="profile-subtitle">
      Siin näed oma edenemist Job Matcheris ja AI Coach treeningutes.
    </p>

    <div class="profile-grid">
      <!-- Üldine statistika -->
      <section class="profile-card">
        <h2 class="card-title">ÜLDINE STATISTIKA</h2>

        <div class="stat-row">
          <span class="stat-label">Job matcher analüüse</span>
          <span class="stat-value">{{ totalJobAnalyses }}</span>
        </div>

        <div class="stat-row">
          <span class="stat-label">Treening sessioone</span>
          <span class="stat-value">{{ totalTrainingSessions }}</span>
        </div>

        <div class="stat-row">
          <span class="stat-label">Viimane aktiivsus</span>
          <span class="stat-value">{{ lastActiveText }}</span>
        </div>

        <div class="divider"></div>

        <div class="stat-row">
          <span class="stat-label">Viimane match skoor</span>
          <span class="stat-value">{{ lastMatchScoreText }}</span>
        </div>

        <div class="stat-row">
          <span class="stat-label">Viimane kokkuvõte</span>
          <span class="stat-value stat-value--summary">
            {{ lastMatchSummaryText }}
          </span>
        </div>
      </section>

      <!-- Treeningu edenemine -->
      <section class="profile-card">
        <h2 class="card-title">TREENINGU EDENEMINE</h2>

        <div class="progress-bar-wrapper">
          <div class="progress-bar">
            <div
              class="progress-bar__fill"
              [style.width.%]="trainingProgressPercent">
            </div>
          </div>
          <div class="progress-bar__label">
            {{ trainingProgressPercent }}%
          </div>
        </div>

        <!-- Kui tahad hiljem lisada tugevusi/nõrkusi -->
        <div class="extra-hint" *ngIf="progress?.lastTrainerStrengths?.length">
          Viimase sessiooni tugevused: {{ progress?.lastTrainerStrengths.join(', ') }}
        </div>

        <div class="extra-hint" *ngIf="progress?.lastTrainerWeaknesses?.length">
          Arengukohad: {{ progress?.lastTrainerWeaknesses.join(', ') }}
        </div>
      </section>
    </div>
  </div>
</div>
